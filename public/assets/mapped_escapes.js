window.onload=function(){function h(a){var b=2.752,c=473.75,d=a*b+c;return d}function i(a){var b=-2.753,c=231,d=a*b+c;return d}function k(a,b,c){return c=c*.5+4,e.circle(h(b),i(a),c).attr(j)}var a=null,b={},c={},d={fill:"#F2F1EE",stroke:"#BFBFBF","stroke-width":.5,"stroke-linejoin":"round"},b={},e=Raphael("holder_1000"),f=new RaphaelZPD(e,{zoom:!0,pan:!0,drag:!0});render_map(e,b,d);for(var g in b)b[g].color=Raphael.getColor(),function(c,d){c[0].style.cursor="pointer",c[0].onmouseover=function(){a&&b[a].animate({fill:"#F2F1EE",stroke:"#BFBFBF"},300),c.animate({fill:"#DCD9D0",stroke:"#BFBFBF"},300),e.safari(),a=d},c[0].onmouseout=function(){c.animate({fill:"#F2F1EE",stroke:"#BFBFBF"},300),e.safari()}}(b[g],g);var j={fill:"#6666FF",stroke:"none",opacity:.6},l={};$.getJSON("/escapes_lat_long.json",function(a){var c,d,f,h;for(d=0,f=a.length;d<f;d++)c=a[d],l[c.city]=k(parseFloat(c.latitude),parseFloat(c.longitude),c.votes);var i=null,j=null;for(var m in l)b[g].color=Raphael.getColor(),function(a,b){a[0].style.cursor="pointer",a[0].onmouseover=function(){i&&l[i].animate({fill:"#6666FF",opacity:1},300),a.animate({fill:"#E3C051",opacity:1},300),e.safari(),i=b},a[0].onmouseout=function(){a.animate({fill:"#6666FF",opacity:1},300),e.safari()},a[0].onclick=function(){if(t=document.getElementById(j))t.style.display="none";if(t=document.getElementById(b))t.style.display="block";j=b};if(t=document.getElementById(b))t.style.left=l[b].attr("cx")+"px",t.style.top=l[b].attr("cy")-20+"px"}(l[m],m)})};